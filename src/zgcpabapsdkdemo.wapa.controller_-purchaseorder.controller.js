sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/BusyIndicator","sap/m/MessageBox"],function(e,t,o,n){"use strict";return e.extend("com.google.googlecloudabapsdkdemo.controller.PurchaseOrder",{onInit:function(){var e+
=this;var o={PurchaseOrderSet:{},Document:{},DocumentData:{}};this.getOwnerComponent().getModel().read("/PurchaseOrderSet",{success:function(n){var r=new t(n);o.PurchaseOrderSet=r.getData();var a=new t(o);e.getView().setModel(a,"mainModel");e.getView().g+
etModel("mainModel").refresh()}})},toDocument:function(e){var o=this;o.showBusyIndicator(1e4);var n=o.getView().getModel("mainModel");var r=n.getData();var a="/PurchaseOrderSet('"+encodeURIComponent(e)+"')/Document";this.getOwnerComponent().getModel().re+
ad(a,{success:function(e){var a=new t(e).getData();var i=a.DocumentContent;const s=atob(i);let d=s.length;let c=new Uint8Array(d);while(d--){c[d]=s.charCodeAt(d)}const u=new Blob([c.buffer],{type:a.MimeType});r.Document=a;r.Document.blobUrl=URL.createObj+
ectURL(u);jQuery.sap.addUrlWhitelist("blob");n=new t(r);o.getView().setModel(n,"mainModel");o.getView().getModel("mainModel").refresh();o.getView().byId("scan_button").setEnabled(true);o.hideBusyIndicator()}})},toDocumentData:function(e){var o=this;o.sho+
wBusyIndicator(1e4);var n=o.getView().getModel("mainModel");var r=n.getData();var a="/DocumentSet('"+encodeURIComponent(e)+"')/DocumentData";this.getOwnerComponent().getModel().read(a,{urlParameters:{$expand:"DocumentDataItemSet"},success:function(e){r.D+
ocumentData=new t(e).getData();n=new t(r);o.getView().byId("order_entry_view").setVisible(true);o.getView().byId("create_button").setEnabled(true);o.getView().setModel(n,"mainModel");o.getView().getModel("mainModel").refresh();o.hideBusyIndicator()},erro+
r:function(e){console.log("error in scanning document",e)}})},createSalesOrder:function(){var e=this;e.showBusyIndicator(1e4);var o=e.getView().getModel("mainModel");var r=o.getData();var a=this.getOwnerComponent().getModel();a.create("/DocumentDataSet",+
r.DocumentData,{success:function(o){e.hideBusyIndicator();var r=new t(o).getData();console.log("Order is ",r);n.information("Sales Order created succssfully with no.: "+r.SalesOrderNumber);e.refresh_screen()},error:function(t){console.log("Error is ",t);+
e.hideBusyIndicator();n.error("Error in creating Sales Order");e.refresh_screen()}})},refresh_screen:function(){var e=this.getView();e.byId("create_button").setEnabled(false);e.byId("order_entry_view").setVisible(false);e.byId("scan_button").setEnabled(f+
alse);var t=e.getModel("mainModel");var o=t.getData();o.DocumentData={};o.Document={};this.getView().setModel(t,"mainModel");this.getView().getModel("mainModel").refresh()},hideBusyIndicator:function(){o.hide()},showBusyIndicator:function(e,t){o.show(t);+
if(e&&e>0){if(this._sTimeoutId){clearTimeout(this._sTimeoutId);this._sTimeoutId=null}this._sTimeoutId=setTimeout(function(){this.hideBusyIndicator()}.bind(this),e)}}})});                                                                                     
//# sourceMappingURL=PurchaseOrder.controller.js.map                                                                                                                                                                                                           